openapi: 3.0.4
info:
  title: ET-Web API Documentation
  version: 1.0.0
  description: |-
    This is the API documentation for ET-Web application. The API provides endpoints for managing:
    - Achievements
    - Activities
    - News & Blogs
    - Partners
    - Personnel & Accounts
    - System Roles
    - FAQs
    - Banners
    - Terms

    For any questions or issues, please contact the development team.
servers:
  - url: http://localhost:8080
    description: Development server
  - url: https://api.etclub.click
    description: Production server
tags:
  - name: achievements
    description: Operations about achievements
  - name: activities
    description: Operations about activities
  - name: et-news
    description: Operations about ET news
  - name: et-blog
    description: Operations about ET blog
  - name: partners
    description: Operations about partners
  - name: personnels
    description: Operations about personnel management
  - name: accounts
    description: Operations about user accounts
  - name: system-role
    description: Operations about system roles
  - name: banners
    description: Operations about banners
  - name: faqs
    description: Operations about FAQs
  - name: terms
    description: Operations about terms
  - name: auth
    description: Operations about authentication
  - name: search
    description: Operations about search functionality
paths:
  /auth/login:
    post:
      tags:
        - auth
      operationId: login
      summary: User login
      description: Authenticate user and return JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/LoginRequest"
            example:
              username: "user@example.com"
              password: "12345678"
      responses:
        "200":
          description: Successful login
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                message: "Login successful"
                accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                refreshToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "400":
          description: Invalid username or password
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: User not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal Server Error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /auth/refresh-token:
    post:
      tags:
        - auth
      operationId: refreshToken
      summary: Refresh JWT token
      description: Refresh the JWT token using the refresh token
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Token refreshed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
              example:
                status: 200
                message: "Token refreshed successfully"
                data:
                  accessToken: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
        "401":
          description: Refresh token is missing
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
                example:
                  message: "Refresh token is missing."
        "403":
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
                example:
                  message: "Invalid token type. Refresh token required."
  /banners:
    get:
      tags:
        - banners
      operationId: getAllBanners
      summary: Get all banners
      description: Retrieve a list of all banners
      responses:
        "200":
          description: Successful retrieval of banners
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/banners"
              example:
                - banner_name: "Welcome Banner"
                  image_url: "https://example.com/banner.jpg"
                  visible: true
        "404":
          description: No banners found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - banners
      operationId: createBanner
      summary: Create a new banner
      description: Create a new banner with the provided details
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/banners"
            example:
              banner_name: "New Banner"
              image_url: "https://example.com/new-banner.jpg"
              visible: true
      responses:
        "201":
          description: Banner created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreatedResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /banners/{id}:
    get:
      tags:
        - banners
      operationId: getBannerById
      summary: Get banner by ID
      description: Retrieve a specific banner by its ID
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the banner to retrieve
      responses:
        "200":
          description: Successful retrieval of banner
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/banners"
              example:
                banner_name: "Welcome Banner"
                image_url: "https://example.com/banner.jpg"
                visible: true
        "404":
          description: Banner not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
        - banners
      operationId: updateBanner
      summary: Update an existing banner
      description: Update the details of an existing banner
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the banner to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/banners"
            example:
              banner_name: "Updated Banner"
              image_url: "https://example.com/updated-banner.jpg"
              visible: true
      responses:
        "200":
          description: Banner updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Banner not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - banners
      operationId: deleteBanner
      summary: Delete a banner
      description: Delete a specific banner by its ID
      security:
        - bearerAuth: []
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
          description: The ID of the banner to delete
      responses:
        "204":
          description: Banner deleted successfully
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Banner not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

  /banners/bulk-delete:
    delete:
      tags:
        - banners
      operationId: bulkDeleteBanners
      summary: Bulk delete banners
      description: Delete multiple banners at once
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
              example: ["banner1", "banner2"]
      responses:
        "204":
          description: Banners deleted successfully
        "400":
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /faqs:
    get:
      tags:
        - faqs
      operationId: getAllFAQs
      summary: Get all FAQs
      description: Retrieve a list of all frequently asked questions
      responses:
        "200":
          description: FAQs retrieved successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: "#/components/schemas/faqs"
        "404":
          description: No FAQs found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    post:
      tags:
        - faqs
      operationId: createFAQ
      summary: Create a new FAQ
      description: Add a new frequently asked question
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/faqs"
      responses:
        "201":
          description: FAQ created successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreatedResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /faqs/{faq_id}:
    get:
      tags:
        - faqs
      operationId: getFAQById
      summary: Get FAQ by ID
      description: Retrieve a specific FAQ by its ID
      parameters:
        - name: faq_id
          in: path
          required: true
          schema:
            type: string
            pattern: ^FAQS\d{3}$
          description: The ID of the FAQ to retrieve
      responses:
        "200":
          description: FAQ retrieved successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/faqs"
        "404":
          description: FAQ not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    put:
      tags:
        - faqs
      operationId: updateFAQ
      summary: Update an existing FAQ
      description: Modify the details of an existing frequently asked question
      security:
        - bearerAuth: []
      parameters:
        - name: faq_id
          in: path
          required: true
          schema:
            type: string
            pattern: ^FAQS\d{3}$
          description: The ID of the FAQ to update
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/faqs"
      responses:
        "200":
          description: FAQ updated successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SuccessResponse"
        "400":
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: FAQ not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
    delete:
      tags:
        - faqs
      operationId: deleteFAQ
      summary: Delete an existing FAQ
      description: Remove a frequently asked question by its ID
      security:
        - bearerAuth: []
      parameters:
        - name: faq_id
          in: path
          required: true
          schema:
            type: string
            pattern: ^FAQS\d{3}$
          description: The ID of the FAQ to delete
      responses:
        "204":
          description: FAQ deleted successfully
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: FAQ not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /faqs/bulk-delete:
    delete:
      tags:
        - faqs
      operationId: bulkDeleteFAQs
      summary: Bulk delete FAQs
      description: Delete multiple FAQs at once
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: array
              items:
                type: string
              example: ["FAQS001", "FAQS002"]
      responses:
        "204":
          description: FAQs deleted successfully
        "400":
          description: Invalid request body
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Some FAQs not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /terms:
    get:
      tags:
        - terms
      operationId: getTerms
      summary: Get terms and conditions
      description: Retrieve the terms and conditions of the application
      security:
        - bearerAuth: []
      responses:
        "200":
          description: Terms retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  terms_text:
                    type: string
                    example: "These are the terms and conditions..."
        "401":
          description: Unauthorized access
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: Terms not found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
  /search:
    get:
      tags:
        - search
      operationId: searchAcrossTables
      summary: Search across multiple tables
      description: Search for content in activities, ET news, and ET blog based on keyword
      parameters:
        - name: keyword
          in: query
          required: true
          schema:
            type: string
          description: Keyword to search for in titles
      responses:
        "200":
          description: Search completed successfully
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/SearchResponse"
        "400":
          description: Keyword is required
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "404":
          description: No results found
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"
        "500":
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ErrorResponse"

components:
  schemas:
    banners:
      type: object
      properties:
        banner_name:
          type: string
          maxLength: 30
          example: "Welcom Banner"
        image_url:
          type: string
          format: uri
          example: "https://example.com/banner.jpg"
        visible:
          type: boolean
          default: false
          example: "Indicates whether the banner is visible"
      required:
        - banner_name
        - image_url
        - visible
    faqs:
      type: object
      properties:
        faq_id:
          type: string
          pattern: ^FAQS\d{3}$
          description: Unique identifier for the FAQ
        faq_category:
          type: string
          enum:
            - Về ET Club
            - Về hoạt động và sự kiện
            - Về quy trình tham gia
            - Khác
          description: Category of the FAQ
        question:
          type: string
          maxLength: 255
          description: The frequently asked question
        answer:
          type: string
          minLength: 1
          description: The answer to the question
        visible:
          type: boolean
          default: true
          description: Indicates whether the FAQ is visible on the homepage
        created_on:
          type: string
          format: date-time
          description: Timestamp of FAQ creation
        last_modified_on:
          type: string
          format: date-time
          description: Timestamp of last modification
      required:
        - faq_category
        - question
        - answer
        - visible

    SearchResult:
      type: object
      properties:
        table:
          type: string
          enum: [activity, et_news, et_blog]
          description: Source table of the result
        activity_id:
          type: string
          description: ID if result is from activity table
        etnews_id:
          type: string
          description: ID if result is from et_news table
        blog_id:
          type: string
          description: ID if result is from et_blog table
        title:
          type: string
          description: Title of the content
        meta_description:
          type: string
          description: Meta description of the content
        thumbnail_image_url:
          type: string
          format: uri
          description: URL of the thumbnail image
      required:
        - table
        - title

    SearchResponse:
      type: object
      properties:
        message:
          type: string
          example: "Successfully"
        data:
          type: array
          items:
            $ref: "#/components/schemas/SearchResult"

    LoginRequest:
      type: object
      properties:
        username:
          type: string
          format: username
          example: "lvc.event@example.com"
        password:
          type: string
          format: password
          example: "securepassword123"
    SuccessResponse: #status 200
      type: object
      properties:
        message:
          type: string
          example: Success
        data:
          type: object
          nullable: true
          example:
            id: "123"
            title: "Morning Run"
            createdAt: "2025-08-01T10:20:30Z"
    CreatedResponse: #status 201
      type: object
      properties:
        message:
          type: string
          example: Resource created successfully
        data:
          type: object
          example:
            id: "123"
            title: "Morning Run"
    ErrorResponse: #status 400, 401, 404, 500
      type: object
      properties:
        message:
          type: string
          example: The 'username' field must be a valid username address
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
